webpackJsonp([13,35],{EPUk:function(t,e,a){var o=a("YiKi");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a("rjj0")("1ab92fba",o,!0,{})},FfMg:function(t,e,a){var o=a("VU/8")(a("lO1W"),a("wuYg"),!1,function(t){a("EPUk")},null,null);t.exports=o.exports},YiKi:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".modal{transition:all .3s ease}.modal.in{background-color:rgba(0,0,0,.5)}.modal.zoom .modal-dialog{-webkit-transform:scale(.1);-moz-transform:scale(.1);-ms-transform:scale(.1);transform:scale(.1);top:300px;opacity:0;-webkit-transition:all .3s;-moz-transition:all .3s;transition:all .3s}.modal.zoom.in .modal-dialog{-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1);-webkit-transform:translate3d(0,-300px,0);transform:translate3d(0,-300px,0);opacity:1}",""])},cE3d:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-tab",{attrs:{header:"Restrições",badge:t.lenght}},[a("table",{staticClass:"table table-striped"},[t.lenght?[a("thead",[a("tr",[a("th",{staticClass:"col-xs-4"},[t._v("Tipo")]),t._v(" "),a("th",{staticClass:"col-xs-4"},[t._v("Início")]),t._v(" "),a("th",{staticClass:"col-xs-4"},[t._v("Fim")]),t._v(" "),a("th",{staticClass:"col-xs-4"},[t._v("Ações")])])]),t._v(" "),a("tbody",t._l(t.registros,function(e){return a("tr",{key:e.id_restricao},[a("td",[e.arma_bl?a("b",[t._v("Restricao de porte de arma de fogo.")]):t._e(),t._v(" "),e.fardamento_bl?a("b",[t._v("Restricao de uso de fardamento.")]):t._e()]),t._v(" "),a("td",[t._v(t._s(e.inicio_data))]),t._v(" "),a("td",["0000-00-00"!=e.fim_data&&e.fim_data?[t._v("\n                                "+t._s(e.retirada_data)+"\n                            ")]:[a("b",{staticStyle:{color:"red"}},[t._v("Vigente")])]],2),t._v(" "),a("td",[a("span",[t.canEdit?[a("a",{staticClass:"btn btn-info",on:{click:function(a){return t.edit(e)}}},[a("i",{staticClass:"fa fa-fw fa-edit "})])]:t._e(),t._v(" "),t.canDelete?[a("a",{staticClass:"btn btn-danger",on:{click:function(a){return t.destroy(e.id_restricao)}}},[a("i",{staticClass:"fa fa-fw fa-trash-o "})])]:t._e()],2)])])}),0)]:[a("tr",[a("td",[t._v("Nada encontrado")])])]],2),t._v(" "),t.canCreate?[a("a",{staticClass:"btn btn-primary btn-block",on:{click:t.toCreate}},[a("i",{staticClass:"fa fa-plus"}),t._v("Adicionar Restrição\n        ")])]:t._e(),t._v(" "),a("v-modal",{attrs:{large:"",effect:"fade",width:"70%"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[a("h4",{staticClass:"modal-title"},[t.registro.id_restricao?a("b",[t._v("Editar Restrição")]):a("b",[t._v("Inserir novo Restrição")])])]),t._v(" "),a("div",{attrs:{slot:"modal-body"},slot:"modal-body"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.registro.id_restricao,expression:"registro.id_restricao"}],attrs:{type:"hidden",name:"id"},domProps:{value:t.registro.id_restricao},on:{input:function(e){e.target.composing||t.$set(t.registro,"id_restricao",e.target.value)}}}),t._v(" "),a("v-label",{attrs:{label:"rg",title:"RG"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.registro.rg,expression:"registro.rg"}],staticClass:"form-control",attrs:{type:"text",size:"12",maxlength:"25",readonly:""},domProps:{value:t.registro.rg},on:{input:function(e){e.target.composing||t.$set(t.registro,"rg",e.target.value)}}})]),t._v(" "),a("v-label",{attrs:{label:"cargo",title:"Posto/Grad."}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.registro.cargo,expression:"registro.cargo"}],staticClass:"form-control",attrs:{type:"text",size:"6",maxlength:"10",readonly:""},domProps:{value:t.registro.cargo},on:{input:function(e){e.target.composing||t.$set(t.registro,"cargo",e.target.value)}}})]),t._v(" "),a("v-label",{attrs:{label:"nome",title:"Nome"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.registro.nome,expression:"registro.nome"}],staticClass:"form-control",attrs:{type:"text",size:"40",readonly:""},domProps:{value:t.registro.nome},on:{input:function(e){e.target.composing||t.$set(t.registro,"nome",e.target.value)}}})]),t._v(" "),a("v-label",{attrs:{label:"check",title:"Restrições: ",md:"12",lg:"12"}},[a("v-checkbox",{attrs:{name:"arma_bl","true-value":"S","false-value":"0",text:"Restrição de Porte de arma de fogo"},model:{value:t.registro.arma_bl,callback:function(e){t.$set(t.registro,"arma_bl",e)},expression:"registro.arma_bl"}}),t._v(" "),a("v-checkbox",{attrs:{name:"fardamento_bl","true-value":"S","false-value":"0",text:"Restrição de uso de fardamento"},model:{value:t.registro.fardamento_bl,callback:function(e){t.$set(t.registro,"fardamento_bl",e)},expression:"registro.fardamento_bl"}})],1),t._v(" "),a("v-label",{attrs:{label:"origem",title:"Situação"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.registro.origem,expression:"registro.origem"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.registro,"origem",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"Laudo medico"}},[t._v("Laudo médico")]),t._v(" "),a("option",{attrs:{value:"Disciplinar/Criminal"}},[t._v("Sit. Disciplinar/Criminal")]),t._v(" "),a("option",{attrs:{value:"Disparo"}},[t._v("Disparo Imprudente/Negligente")]),t._v(" "),a("option",{attrs:{value:"Sob efeito alcool"}},[t._v("Porte sob efeito de alcool ou outra subst.")]),t._v(" "),a("option",{attrs:{value:"Condenacao Punicao Disciplinar"}},[t._v("Condenaçãoo ou Punição Disciplinar")]),t._v(" "),a("option",{attrs:{value:"Inapto Psicologico"}},[t._v("Inapto Avaliaçãoo Psicológica")])])]),t._v(" "),a("v-label",{attrs:{label:"inicio_data",title:"Início da restrição",icon:"fa fa-calendar"}},[a("v-datepicker",{attrs:{name:"inicio_data",placeholder:t.registro.inicio_data,"clear-button":""},model:{value:t.registro.inicio_data,callback:function(e){t.$set(t.registro,"inicio_data",e)},expression:"registro.inicio_data"}})],1),t._v(" "),a("v-label",{attrs:{label:"fim_data",title:"Fim da restrição",icon:"fa fa-calendar"}},[a("v-datepicker",{attrs:{name:"fim_data",placeholder:t.registro.fim_data,"clear-button":""},model:{value:t.registro.fim_data,callback:function(e){t.$set(t.registro,"fim_data",e)},expression:"registro.fim_data"}})],1),t._v(" "),a("v-label",{attrs:{label:"obs_txt",title:"Observações",lg:"12",md:"12"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.registro.obs_txt,expression:"registro.obs_txt"}],attrs:{id:"foco",rows:"6",cols:"105",width:"100%"},domProps:{value:t.registro.obs_txt},on:{input:function(e){e.target.composing||t.$set(t.registro,"obs_txt",e.target.value)}}})]),t._v(" "),a("v-label",{attrs:{label:"",title:"Data de cadastro",lg:"6",md:"6"}},[a("v-show",{attrs:{dado:t.registro.cadastro_data}})],1),t._v(" "),a("v-label",{attrs:{label:"",title:"Data de retirada das restrições",lg:"6",md:"6"}},[a("v-show",{attrs:{dado:t.registro.retirada_data}})],1)],1),t._v(" "),a("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("div",{staticClass:"col-xs-6"},[a("a",{staticClass:"btn btn-default btn-block",on:{click:function(e){t.showModal=!1}}},[t._v("Cancelar")])]),t._v(" "),a("div",{staticClass:"col-xs-6"},[a("v-tooltip",{attrs:{effect:"scale",placement:"top",content:t.msgRequired}},[t.registro.id_restricao?a("a",{staticClass:"btn btn-success btn-block",attrs:{disabled:t.requireds},on:{click:function(e){return e.preventDefault(),t.update(t.registro.id_restricao)}}},[t._v("Editar")]):a("a",{staticClass:"btn btn-success btn-block",attrs:{disabled:t.requireds},on:{click:t.create}},[t._v("Inserir")])])],1)])])],2)},staticRenderFns:[]}},cgaz:function(t,e,a){var o=a("VU/8")(a("eCxq"),a("cE3d"),!1,function(t){a("eRfs")},"data-v-153b01f9",null);t.exports=o.exports},eCxq:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("FfMg"),s=a.n(o),i=a("hlPV");a.n(i);e.default={components:{Modal:s.a,TheMask:i.TheMask},props:["pm"],data:function(){return{module:"restricao",registros:[],registro:{},canCreate:!1,canEdit:!1,canDelete:!1,showModal:!1}},mounted:function(){this.list(),this.canCreate=this.$root.hasPermission("criar-restricoes"),this.canEdit=this.$root.hasPermission("editar-restricoes"),this.canDelete=this.$root.hasPermission("apagar-restricoes")},computed:{requireds:function(){var t=!(!this.registro.arma_bl&&!this.registro.fardamento_bl);return!(this.registro.inicio_data&&this.registro.origem&&t)},lenght:function(){return this.registros?Object.keys(this.registros).length:0},msgRequired:function(){return"Para liberar este botão os campos: RESTRIÇÃO, SITUAÇÃO e DATA DE INÍCIO deve estar preenchidos"}},methods:{list:function(){var t=this,e=this.$root.baseUrl+"api/"+this.module+"/list/"+this.pm.RG;this.pm.RG&&axios.get(e).then(function(e){t.registros=e.data}).catch(function(t){return console.log(t)})},toCreate:function(){this.showModal=!0,this.registro.rg=this.pm.RG,this.registro.cargo=this.pm.CARGO,this.registro.nome=this.pm.NOME},create:function(){var t=this;if(!this.requireds){var e=this.$root.baseUrl+"api/"+this.module+"/store";this.registro.cadastro_data=new Date,this.registro.fim_data="0000-00-00",axios.post(e,this.registro).then(function(e){t.transation(e.data.success,"create")}).catch(function(t){return console.log(t)}),this.showModal=!1}},edit:function(t){this.registro=t,this.showModal=!0},update:function(t){var e=this;if(!this.requireds){var a=this.$root.baseUrl+"api/"+this.module+"/update/"+t;console.log("registro",this.registro.fim_data),axios.put(a,this.registro).then(function(t){e.transation(t.data.success,"edit")}).catch(function(t){return console.log(t)})}},destroy:function(t){var e=this;if(confirm("Você tem certeza?")){var a=this.$root.baseUrl+"api/"+this.module+"/destroy/"+t;axios.delete(a).then(function(t){e.transation(t.data.success,"delete")}).catch(function(t){return console.log(t)})}},transation:function(t,e){var a=this.words(e);this.showModal=!1,t?(this.list(),this.$root.msg(a.success,"success"),this.registro=null,this.registro={}):this.$root.msg(a.fail,"danger")},words:function(t){return"create"==t?{success:"Inserido com sucesso",fail:"Erro ao inserir"}:"edit"==t?{success:"Editado com sucesso",fail:"Erro ao editar"}:"delete"==t?{success:"Apagado com sucesso",fail:"Erro ao apagar"}:void 0}}}},eRfs:function(t,e,a){var o=a("o2qF");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a("rjj0")("7f6257ef",o,!0,{})},lO1W:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function o(){if(document.documentElement.scrollHeight<=document.documentElement.clientHeight)return 0;var t=document.createElement("p");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(t),document.body.appendChild(e);var a=t.offsetWidth;e.style.overflow="scroll";var o=t.offsetWidth;return a===o&&(o=e.clientWidth),document.body.removeChild(e),a-o}e.default={props:{backdrop:{type:Boolean,default:!0},callback:{type:Function,default:null},cancelText:{type:String,default:"Close"},effect:{type:String,default:null},large:{type:Boolean,default:!1},okText:{type:String,default:"Save changes"},small:{type:Boolean,default:!1},title:{type:String,default:""},value:{type:Boolean,required:!0},width:{default:null}},data:function(){return{transition:!1,val:null}},computed:{optionalWidth:function(){return null===this.width?null:Number.isInteger(this.width)?this.width+"px":this.width}},watch:{transition:function(t,e){if(t!==e){var a=this.$el,s=document.body;t?this.val?(a.querySelector(".modal-content").focus(),a.style.display="block",setTimeout(function(){return a.classList.add("in")},0),s.classList.add("modal-open"),0!==o()&&(s.style.paddingRight=o()+"px")):a.classList.remove("in"):(this.$emit(this.val?"opened":"closed"),this.val||(a.style.display="none",s.style.paddingRight=null,s.classList.remove("modal-open")))}},val:function(t,e){this.$emit("input",t),(null===e?!0===t:t!==e)&&(this.transition=!0)},value:function(t,e){t!==e&&(this.val=t)}},methods:{action:function(t,e){null!==t&&(t&&this.callback instanceof Function&&this.callback(),this.$emit(t?"ok":"cancel",e),this.val=t||!1)}},mounted:function(){this.val=this.value}}},o2qF:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"td[data-v-153b01f9]{white-space:normal!important;word-wrap:break-word}table[data-v-153b01f9]{table-layout:fixed}",""])},wuYg:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["modal",t.effect],attrs:{role:"dialog"},on:{click:function(e){t.backdrop&&t.action(!1,1)},transitionend:function(e){t.transition=!1}}},[a("div",{class:["modal-dialog",{"modal-lg":t.large,"modal-sm":t.small}],style:{width:t.optionalWidth},attrs:{role:"document"},on:{click:function(e){return e.stopPropagation(),t.action(null)}}},[a("div",{staticClass:"modal-content"},[t._t("modal-header",[a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){return t.action(!1,2)}}},[a("span",[t._v("×")])]),t._v(" "),a("h4",{staticClass:"modal-title"},[t._t("title",[t._v(t._s(t.title))])],2)])]),t._v(" "),t._t("modal-body",[a("div",{staticClass:"modal-body"},[t._t("default")],2)]),t._v(" "),t._t("modal-footer",[a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(e){return t.action(!1,3)}}},[t._v(t._s(t.cancelText))]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.action(!0,4)}}},[t._v(t._s(t.okText))])])])],2)])])},staticRenderFns:[]}}});