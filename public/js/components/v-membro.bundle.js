webpackJsonp([25],{BaMF:function(t,s,a){var o=a("VU/8")(a("t+uq"),a("nfE9"),!1,function(t){a("Qt6C")},"data-v-fbb289f2",null);t.exports=o.exports},Qt6C:function(t,s,a){var o=a("zS7p");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a("rjj0")("16c1a432",o,!0,{})},nfE9:function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"col-lg-12 col-md-12 col-xs-12 card"},[a("div",{staticClass:"card-header"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-10"},[a("h5",[a("b",[t._v("Membros "+t._s(t.titleSubstitute||""))])])]),t._v(" "),a("div",{staticClass:"col align-self-end"},[a("div",{staticClass:"btn-group"},[a("a",{staticClass:"btn",class:"atuais"==t.mode?"btn-info":"btn-default",on:{click:function(s){t.mode="atuais"}}},[t._v("\n                        Atuais\n                    ")]),t._v(" "),a("a",{staticClass:"btn",class:"substituidos"==t.mode?"btn-info":"btn-default",attrs:{type:"button"},on:{click:function(s){t.mode="substituidos"}}},[t._v("\n                        Substituídos\n                    ")])])])])]),t._v(" "),a("br"),t._v(" "),"atuais"!=t.mode||t.only?t._e():a("div",{staticClass:"card-body ",class:t.add?"bordaform":""},[t.add?a("div",[a("div",{staticClass:"row",attrs:{id:"ligacaoForm1"}},[a("form",{attrs:{id:"formFormMembro",name:"formFormMembro"}},[a("input",{attrs:{type:"hidden",name:"id_"+t.dproc},domProps:{value:t.idp}}),t._v(" "),a("input",{attrs:{type:"hidden",name:"indexsubs"},domProps:{value:t.indexsubs}}),t._v(" "),a("input",{attrs:{type:"hidden",name:"idsubs"},domProps:{value:t.idsubs}}),t._v(" "),a("div",{staticClass:"col-lg-3 col-md-4 col-xs 4"},[t.substituido?[a("label",{attrs:{for:"rg"}},[t._v("RG Substituto")]),a("br")]:[a("label",{attrs:{for:"rg"}},[t._v("RG")]),a("br")],t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.rg,expression:"rg"}],staticClass:"numero form-control",attrs:{type:"text",maxlength:"12",name:"rg",placeholder:"Nº"},domProps:{value:t.rg},on:{keyup:function(s){return t.searchPM()},input:function(s){s.target.composing||(t.rg=s.target.value)}}})],2),t._v(" "),a("div",{staticClass:"col-lg-3 col-md-2 col-xs 2"},[a("label",{attrs:{for:"nome"}},[t._v("Nome")]),a("br"),t._v(" "),a("input",{staticClass:"numero form-control",attrs:{type:"text",name:"nome",readonly:""},domProps:{value:t.nome}})]),t._v(" "),a("div",{staticClass:"col-lg-2 col-md-2 col-xs 2"},[a("label",{attrs:{for:"cargo"}},[t._v("Posto/Graduação")]),a("br"),t._v(" "),a("input",{staticClass:"numero form-control",attrs:{type:"text",name:"cargo",readonly:""},domProps:{value:t.cargo}})]),t._v(" "),a("div",{staticClass:"col-lg-2 col-md-2 col-xs 2"},[a("label",{attrs:{for:"situacao"}},[t._v("Situação")]),a("br"),t._v(" "),t.substituido?a("input",{staticClass:"form-control",attrs:{type:"text",name:"situacao",readonly:""},domProps:{value:t.situacaosubs}}):a("select",{directives:[{name:"model",rawName:"v-model",value:t.situacao,expression:"situacao"}],staticClass:"form-control",attrs:{name:"situacao",disabled:!t.finded,required:""},on:{change:function(s){var a=Array.prototype.filter.call(s.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.situacao=s.target.multiple?a:a[0]}}},t._l(t.situacoes,function(s,o){return a("option",{key:o,domProps:{value:s}},[t._v(t._s(s))])}),0)]),t._v(" "),a("div",{staticClass:"col-lg-1 col-md-1 col-xs 1"},[a("label",[t._v("Cancelar")]),a("br"),t._v(" "),a("a",{staticClass:"btn btn-danger btn-block",on:{click:function(s){return t.clear(!1)}}},[a("i",{staticClass:"fa fa-times",staticStyle:{color:"white"}})])]),t._v(" "),a("div",{staticClass:"col-lg-1 col-md-1 col-xs 1"},[t.substituido?[a("label",[t._v("Substituir")]),a("br"),t._v(" "),a("a",{staticClass:"btn btn-success btn-block",attrs:{disabled:!t.finded},on:{click:t.createPM}},[a("i",{staticClass:"fa fa-plus",staticStyle:{color:"white"}})])]:[a("label",[t._v("Adicionar")]),a("br"),t._v(" "),a("a",{staticClass:"btn btn-success btn-block",attrs:{disabled:!t.situacao},on:{click:t.createPM}},[a("i",{staticClass:"fa fa-plus",staticStyle:{color:"white"}})])]],2)])])]):a("div",[a("button",{staticClass:"btn btn-success btn-block",on:{click:function(s){t.add=!t.add}}},[a("i",{staticClass:"fa fa-plus"}),t._v(" Adicionar membro")])])]),t._v(" "),a("div",{staticClass:"card-footer"},["atuais"==t.mode?[t._m(0),t._v(" "),t.pms.length?a("div",{staticClass:"row bordaform"},[a("div",{staticClass:"col-sm-12"},[a("table",{staticClass:"table table-hover"},[t._m(1),t._v(" "),a("tbody",t._l(t.pms,function(s,o){return a("tr",{key:o},[a("td",[t._v(t._s(o+1))]),t._v(" "),a("td",[t._v(t._s(s.rg))]),t._v(" "),a("td",[t._v(t._s(s.nome))]),t._v(" "),a("td",[t._v(t._s(s.cargo))]),t._v(" "),a("td",[t._v(t._s(s.situacao))]),t._v(" "),a("td",[a("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"First group"}},[a("a",{staticClass:"btn btn-primary",staticStyle:{color:"white"},attrs:{type:"button",target:"_blanck"},on:{click:function(a){return t.showPM(s.rg)}}},[a("i",{staticClass:"fa fa-eye"})]),t._v(" "),t.canReplace?a("a",{staticClass:"btn btn-success",staticStyle:{color:"white"},attrs:{type:"button"},on:{click:function(a){return t.replacePM(s,o)}}},[a("i",{staticClass:"fa fa-retweet"})]):t._e(),t._v(" "),t.canDelete?a("a",{staticClass:"btn btn-danger",staticStyle:{color:"white"},attrs:{type:"button"},on:{click:function(a){return t.removePM(s.id_envolvido,s.situacao,o)}}},[a("i",{staticClass:"fa fa-trash"})]):t._e()])])])}),0)])])]):a("div",[a("h6",[t._v("\n                    Não há registros\n                ")])])]:[t._m(2),t._v(" "),t.subs.length?a("div",{staticClass:"row bordaform"},[a("div",{staticClass:"col-sm-12"},[a("table",{staticClass:"table table-hover"},[t._m(3),t._v(" "),a("tbody",t._l(t.subs,function(s,o){return a("tr",{key:o},[a("td",[t._v(t._s(o+1))]),t._v(" "),a("td",[t._v(t._s(s.rg))]),t._v(" "),a("td",[t._v(t._s(s.nome))]),t._v(" "),a("td",[t._v(t._s(s.cargo))]),t._v(" "),a("td",[a("i",{staticClass:"fa fa-sign-out",staticStyle:{color:"red"}}),t._v(t._s(s.situacao)),a("br"),t._v(" "),a("i",{staticClass:"fa fa-sign-in",staticStyle:{color:"green"}}),t._v(t._s(s.rg_substituto)+"\n                                ")]),t._v(" "),a("td",[a("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"First group"}},[a("a",{staticClass:"btn btn-primary",staticStyle:{color:"white"},attrs:{type:"button",target:"_blanck"},on:{click:function(a){return t.showPM(s.rg)}}},[a("i",{staticClass:"fa fa-eye"})])])])])}),0)])])]):a("div",[a("h6",[t._v("\n                    Não há registros substituídos\n                ")])])]],2)])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("h5",[s("b",[this._v("Atuais")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("thead",[a("tr",[a("th",{staticClass:"col-sm-2"},[t._v("#")]),t._v(" "),a("th",{staticClass:"col-sm-2"},[t._v("RG")]),t._v(" "),a("th",{staticClass:"col-sm-2"},[t._v("Nome")]),t._v(" "),a("th",{staticClass:"col-sm-2"},[t._v("Posto/Grad.")]),t._v(" "),a("th",{staticClass:"col-sm-2"},[t._v("Situação")]),t._v(" "),a("th",{staticClass:"col-sm-2"},[t._v("Ver/Substituir/Apagar")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h5",[s("b",[this._v("Substituídos")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("thead",[a("tr",[a("th",{staticClass:"col-sm-2"},[t._v("#")]),t._v(" "),a("th",{staticClass:"col-sm-2"},[t._v("RG")]),t._v(" "),a("th",{staticClass:"col-sm-2"},[t._v("Nome")]),t._v(" "),a("th",{staticClass:"col-sm-2"},[t._v("Posto/Grad.")]),t._v(" "),a("th",{staticClass:"col-sm-2"},[t._v("Situação")]),t._v(" "),a("th",{staticClass:"col-sm-2"},[t._v("Ver")])])])}]}},s9Db:function(t,s,a){"use strict";s.a={data:function(){return{add:!1}},methods:{list:function(){var t=this,s=this.$root.baseUrl+"api/"+this.module+"/list/"+this.rg;this.rg&&axios.get(s).then(function(s){t.registros=s.data}).catch(function(t){return console.log(t)})},create:function(){var t=this,s=this.$root.baseUrl+"api/"+this.module+"/store";axios.post(s,this.registro).then(function(s){t.transation(s.data.success,"create")}).catch(function(t){return console.log(t)}),this.showModal=!1},edit:function(t){this.registro=t,this.showModal=!0},update:function(t){var s=this,a=this.$root.baseUrl+"api/"+this.module+"/update/"+t;axios.put(a,this.registro).then(function(t){s.transation(t.data.success,"edit")}).catch(function(t){return console.log(t)})},destroy:function(t){var s=this;if(confirm("Você tem certeza?")){var a=this.$root.baseUrl+"api/"+this.module+"/destroy/"+t;axios.delete(a).then(function(t){s.transation(t.data.success,"delete")}).catch(function(t){return console.log(t)})}},transation:function(t,s){var a=this.words(s);this.showModal=!1,t?(this.list(),this.$root.msg(a.success,"success"),this.registro=[]):this.$root.msg(a.fail,"danger")},words:function(t){return"create"==t?{success:"Inserido com sucesso",fail:"Erro ao inserir"}:"edit"==t?{success:"Editado com sucesso",fail:"Erro ao editar"}:"delete"==t?{success:"Apagado com sucesso",fail:"Erro ao apagar"}:void 0}}}},"t+uq":function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var o=a("s9Db"),i=a("hlPV");a.n(i);s.default={mixins:[o.a],components:{TheMask:i.TheMask},props:{unique:{type:Boolean,default:!1},idp:{type:String,default:""},dproc:{type:String,default:""}},data:function(){return{add:!1,nome:"",cargo:"",pms:[],subs:[],finded:!1,situacao:!1,counter:0,only:!1,situacoes:[],usados:[],substituido:!1,idsubs:"",rgsubs:"",nomesubs:"",situacaosubs:"",substitute:!1,titleSubstitute:"",indexsubs:"",mode:"atuais"}},created:function(){this.verifyOnly,this.listPM()},computed:{verifyOnly:function(){1==this.unique?this.only=!0:this.only=!1},canReplace:function(){return this.$root.hasPermission("substituir-membros")},canDelete:function(){return this.$root.hasPermission("apagar-membros")}},methods:{searchPM:function(){var t=this,s=this.$root.baseUrl+"api/dados/pm/"+this.rg;console.log("url",s),this.rg.length>5&&(this.substituido&&this.rg==this.rgsubs?(this.nome="Inválido - Mesmo RG informado",this.cargo="Mesmo RG",this.finded=!1):axios.get(s).then(function(s){s.data.success?(t.nome=s.data.pm.NOME||s.data.pm.nome,t.cargo=s.data.pm.CARGO||s.data.pm.cargo,t.finded=!0):(t.nome="",t.cargo="",t.finded=!1)}).catch(function(t){return console.log(t)}))},listPM:function(){var t=this,s=this.$root.baseUrl+"api/dados/membros/"+this.dproc+"/"+this.idp;this.dproc&&this.idp&&axios.get(s).then(function(s){t.pms=s.data.membros,t.subs=s.data.subs,t.usados=s.data.usados}).then(function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.usados;t.situacoes=["Acusador","Encarregado","Escrivão","Membro","Presidente"].filter(function(s){return!t.usados.includes(s)})}).then(this.clear(!1)).catch(function(t){return console.log(t)})},createPM:function(){var t=this.$root.baseUrl+"api/membros/store",s=document.getElementById("formFormMembro"),a=new FormData(s);axios.post(t,a).then(this.listPM()).catch(function(t){return console.log(t)})},showPM:function(t){var s=this.$root.baseUrl+"fdi/"+t+"/ver";window.open(s,"_blank")},removePM:function(t,s,a){this.clear(!1);var o=this.$root.baseUrl+"api/membros/destroy/"+t;axios.delete(o).then(this.updateSituacao(s,"remove")).then(this.pms.splice(a,1)).catch(function(t){return console.log(t)})},updateSituacao:function(t,s){var a=this;if("add"==s)this.usados.push(t);else{var o=this.usados.indexOf(t);this.usados.splice(o,1)}this.situacoes=["Acusador","Encarregado","Escrivão","Membro","Presidente"].filter(function(t){return!a.usados.includes(t)})},replacePM:function(t,s){this.titleSubstitute=" - Substituição do "+t.situacao+" "+t.nome,this.substituido=!0,this.rgsubs=t.rg,this.nomesubs=t.nome,this.situacaosubs=t.situacao,this.idsubs=t.id_envolvido,this.indexsubs=s,this.add=!0},clear:function(t){this.add=t,this.rg="",this.nome="",this.cargo="",this.situacao="",this.substituido=!1,this.rgsubs="",this.nomesubs="",this.situacaosubs="",this.substitute=!1,this.titleSubstitute="",this.finded=!1}}}},zS7p:function(t,s,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])}});