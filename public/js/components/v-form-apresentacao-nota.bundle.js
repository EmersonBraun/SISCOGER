webpackJsonp([72],{"1voi":function(t,e,o){(t.exports=o("FZ+f")(!1)).push([t.i,"",""])},LBfB:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{reference:{type:Number,default:null},ano:{type:Number,default:null},id_notacomparecimento:{type:Number,default:null}},data:function(){return{module:"apresentacao",registros:null,registro:{pessoa_rg:"",pessoa_nome:"",id_apresentacaonotificacao:"1",id_apresentacaosituacao:"1",id_apresentacaoclassificacaosigilo:"1",id_apresentacaotipoprocesso:"3",id_apresentacaocondicao:"1"},error:{},type:null,onSearch:!1,templateLocal:"<span>{{item.localdeapresentacao}}.{{item.logradouro}}, {{item.numero}} - {{item.bairro}} - {{item.municipio}}/{{item.uf}}. Tel.: {{item.telefone}}. CEP: {{item.cep}}.</span>",templatePM:"<span>{{item.CARGO}} {{item.NOME}} - {{item.RG}} (OM: {{item.OPM_DESCRICAO}}).</span>"}},computed:{buscaLocal:function(){return this.$root.baseUrl+"api/localapresentacao/"},buscaPM:function(){return this.$root.baseUrl+"api/dados/showsugest/"+this.type+"/"},requireds:function(){return!(this.registro.autos_numero&&this.registro.comparecimento_data&&this.registro.comparecimento_hora&&this.registro.comparecimento_local_txt&&this.registro.pessoa_rg&&this.registro.pessoa_nome&&this.registro.pessoa_posto&&this.registro.pessoa_quadro&&this.registro.id_apresentacaocondicao)},msgRequired:function(){return"Para liberar este botão os campos: AUTOS, DATA DO COMPARECIMENTO, HORA, DESCRIÇÃO DO LOCAL, E OS DADOS DO PM/BM deve estar preenchidos"},canEdit:function(){return this.$root.hasPermission("editar-apresentacao")},canDelete:function(){return this.$root.hasPermission("apagar-apresentacao")},lenght:function(){return this.registros?Object.keys(this.registros).length:0}},created:function(){this.list(),this.reference?this.dadosApresentacao():this.cleanRegister()},methods:{list:function(){var t=this,e=this.$root.baseUrl+"api/"+this.module+"/listnota/"+this.id_notacomparecimento;this.id_notacomparecimento&&axios.get(e).then(function(e){t.registros=e.data}).catch(function(t){return console.log(t)})},changeMode:function(t){return this.type=t,this.onSearch=!0,!0},limparDados:function(){confirm("Você tem certeza?")&&(this.registro=null,this.registro={})},selectLocal:function(t){var e=t.localdeapresentacao+"."+t.logradouro+", "+t.numero+" - "+t.bairro+" - "+t.municipio+"/"+t.uf+". Tel.: "+t.telefone+". CEP: "+t.cep+".";return this.registro.comparecimento_local_txt=e,this.registro.id_localdeapresentacao=t.id_localdeapresentacao,e},selectPM:function(t){this.onSearch=!1,this.type=null,this.registro.pessoa_rg=t.RG,this.registro.pessoa_nome=t.NOME,this.registro.pessoa_posto=t.CARGO,this.registro.pessoa_quadro=t.QUADRO,this.registro.pessoa_email=t.EMAIL_META4,this.registro.pessoa_opm_meta4=t.META4,this.registro.pessoa_opm_sigla=t.ABREVIATURA,this.registro.pessoa_opm_descricao=t.OPM_DESCRICAO,this.registro.pessoa_unidade_lotacao_meta4=t.META4,this.registro.pessoa_unidade_lotacao_codigo=t.CDOPM,this.registro.pessoa_unidade_lotacao_sigla=t.ABREVIATURA,this.registro.pessoa_unidade_lotacao_descricao=t.OPM_DESCRICAO;var e=t.CDOPM.substring(0,3);return this.registro.pessoa_opm_codigo=e,this.type?t.RG:t.NOME},dadosApresentacao:function(){var t=this,e=this.ano?this.reference+"/"+this.ano:this.reference,o=this.$root.baseUrl+"api/"+this.module+"/"+e;axios.get(o).then(function(e){t.registro=e.data}).catch(function(t){return console.log(t)})},cleanRegister:function(){this.registro={pessoa_rg:"",pessoa_nome:"",id_apresentacaonotificacao:"1",id_apresentacaosituacao:"1",id_apresentacaoclassificacaosigilo:"1",id_apresentacaotipoprocesso:"3",id_apresentacaocondicao:"1",id_notacomparecimento:this.id_notacomparecimento,cdopm:this.$root.dadoSession("cdopmbase"),usuario_rg:this.$root.dadoSession("rg"),autos_ano:(new Date).getFullYear()}},additionalData:function(){var t=this.registro,e=t.comparecimento_data.split("/").reverse().join("-");this.registro.comparecimento_hora=this.registro.comparecimento_hora,this.registro.comparecimento_dh=e+" "+t.comparecimento_hora},create:function(){var t=this;if(!this.requireds){this.additionalData();var e=this.$root.baseUrl+"api/"+this.module+"/store";axios.post(e,this.registro).then(function(e){t.transation(e.data.success,"create")}).catch(function(t){return console.log(t)})}},edit:function(t){this.registro=t},update:function(t){var e=this;if(!this.requireds){var o=this.$root.baseUrl+"api/"+this.module+"/update/"+t;axios.put(o,this.registro).then(function(t){e.transation(t.data.success,"edit")}).catch(function(t){return console.log(t)})}},destroy:function(t){var e=this;if(confirm("Você tem certeza?")){var o=this.$root.baseUrl+"api/"+this.module+"/destroyApi/"+t;axios.delete(o).then(function(t){e.transation(t.data.success,"delete")}).catch(function(t){return console.log(t)})}},transation:function(t,e){var o=this.words(e);t?(this.list(),this.$root.msg(o.success,"success"),this.registro=null,this.cleanRegister()):this.$root.msg(o.fail,"danger")},words:function(t){return"create"==t?{success:"Inserido com sucesso",fail:"Erro ao inserir"}:"edit"==t?{success:"Editado com sucesso",fail:"Erro ao editar"}:"delete"==t?{success:"Apagado com sucesso",fail:"Erro ao apagar"}:void 0}}}},S0bl:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("v-label",{attrs:{lg:"2",md:"2",title:"Autos Nº",error:t.error.autos_numero}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.registro.autos_numero,expression:"registro.autos_numero"}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.registro.autos_numero},on:{input:function(e){e.target.composing||t.$set(t.registro,"autos_numero",e.target.value)}}})]),t._v(" "),o("v-label",{attrs:{lg:"2",md:"2",title:"Autos Ano",error:t.error.autos_ano}},[o("v-ano",{model:{value:t.registro.autos_ano,callback:function(e){t.$set(t.registro,"autos_ano",e)},expression:"registro.autos_ano"}})],1),t._v(" "),o("v-label",{attrs:{lg:"2",md:"2",title:"Acusados",error:t.error.acusados}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.registro.acusados,expression:"registro.acusados"}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.registro.acusados},on:{input:function(e){e.target.composing||t.$set(t.registro,"acusados",e.target.value)}}})]),t._v(" "),o("v-label",{attrs:{lg:"2",md:"2",title:"Data do comparecimento",icon:"fa fa-calendar"}},[o("v-datepicker",{attrs:{"clear-button":""},model:{value:t.registro.comparecimento_data,callback:function(e){t.$set(t.registro,"comparecimento_data",e)},expression:"registro.comparecimento_data"}})],1),t._v(" "),o("v-label",{attrs:{lg:"2",md:"2",title:"Hora",error:t.error.comparecimento_hora}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.registro.comparecimento_hora,expression:"registro.comparecimento_hora"}],staticClass:"form-control",attrs:{type:"time",placeholder:"00:00",required:""},domProps:{value:t.registro.comparecimento_hora},on:{input:function(e){e.target.composing||t.$set(t.registro,"comparecimento_hora",e.target.value)}}})]),t._v(" "),o("v-label",{attrs:{lg:"2",md:"2",title:"Observações",error:t.error.observacao_txt}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.registro.observacao_txt,expression:"registro.observacao_txt"}],staticClass:"form-control",domProps:{value:t.registro.observacao_txt},on:{input:function(e){e.target.composing||t.$set(t.registro,"observacao_txt",e.target.value)}}})]),t._v(" "),o("v-label",{attrs:{lg:"12",md:"12",title:"Descrição do local",error:t.error.comparecimento_local_txt}},[o("v-typeahead",{attrs:{placeholder:"Busca local",async:t.buscaLocal,"on-hit":t.selectLocal,template:t.templateLocal},model:{value:t.registro.comparecimento_local_txt,callback:function(e){t.$set(t.registro,"comparecimento_local_txt",e)},expression:"registro.comparecimento_local_txt"}}),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.registro.id_localdeapresentacao,expression:"registro.id_localdeapresentacao"}],attrs:{type:"hidden"},domProps:{value:t.registro.id_localdeapresentacao},on:{input:function(e){e.target.composing||t.$set(t.registro,"id_localdeapresentacao",e.target.value)}}})],1),t._v(" "),o("v-label",{attrs:{lg:"2",md:"2",title:"RG",error:t.error.pessoa_rg}},[t.onSearch&&"rg"==t.type?[o("v-typeahead",{attrs:{placeholder:"Busca PM/BM ativos",async:t.buscaPM,"on-hit":t.selectPM,template:t.templatePM,"match-start":""},model:{value:t.registro.pessoa_rg,callback:function(e){t.$set(t.registro,"pessoa_rg",e)},expression:"registro.pessoa_rg"}})]:[o("input",{directives:[{name:"model",rawName:"v-model",value:t.registro.pessoa_rg,expression:"registro.pessoa_rg"}],staticClass:"form-control ",attrs:{type:"text",placeholder:"Busca PM/BM ativos"},domProps:{value:t.registro.pessoa_rg},on:{click:function(e){return e.preventDefault(),t.changeMode("rg")},input:function(e){e.target.composing||t.$set(t.registro,"pessoa_rg",e.target.value)}}})]],2),t._v(" "),o("v-label",{attrs:{lg:"2",md:"2",title:"Nome",error:t.error.pessoa_nome}},[t.onSearch&&"nome"==t.type?[o("v-typeahead",{attrs:{placeholder:"Busca PM/BM ativos",async:t.buscaPM,"on-hit":t.selectPM,template:t.templatePM,"match-start":""},model:{value:t.registro.pessoa_nome,callback:function(e){t.$set(t.registro,"pessoa_nome",e)},expression:"registro.pessoa_nome"}})]:[o("input",{directives:[{name:"model",rawName:"v-model",value:t.registro.pessoa_nome,expression:"registro.pessoa_nome"}],staticClass:"form-control ",attrs:{type:"text",placeholder:"Busca PM/BM ativos"},domProps:{value:t.registro.pessoa_nome},on:{click:function(e){return e.preventDefault(),t.changeMode("nome")},input:function(e){e.target.composing||t.$set(t.registro,"pessoa_nome",e.target.value)}}})]],2),t._v(" "),o("v-label",{attrs:{lg:"2",md:"2",title:"Posto/Grad",error:t.error.pessoa_posto}},[o("select",{directives:[{name:"model",rawName:"v-model",value:t.registro.pessoa_posto,expression:"registro.pessoa_posto"}],staticClass:"form-control",on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.registro,"pessoa_posto",e.target.multiple?o:o[0])}}},[o("option",{attrs:{value:"CELAGREG"}},[t._v("CELAGREG")]),t._v(" "),o("option",{attrs:{value:"CEL"}},[t._v("CEL")]),t._v(" "),o("option",{attrs:{value:"TENCEL"}},[t._v("TENCEL")]),t._v(" "),o("option",{attrs:{value:"MAJ"}},[t._v("MAJ")]),t._v(" "),o("option",{attrs:{value:"CAP"}},[t._v("CAP")]),t._v(" "),o("option",{attrs:{value:"1TEN"}},[t._v("1TEN")]),t._v(" "),o("option",{attrs:{value:"2TEN"}},[t._v("2TEN")]),t._v(" "),o("option",{attrs:{value:"ASPOF"}},[t._v("ASPOF")]),t._v(" "),o("option",{attrs:{value:"ALUNO"}},[t._v("ALUNO")]),t._v(" "),o("option",{attrs:{value:"ALUNO3A"}},[t._v("ALUNO3A")]),t._v(" "),o("option",{attrs:{value:"ALUNO2A"}},[t._v("ALUNO2A")]),t._v(" "),o("option",{attrs:{value:"ALUNO1A"}},[t._v("ALUNO1A")]),t._v(" "),o("option",{attrs:{value:"SUBTEN"}},[t._v("SUBTEN")]),t._v(" "),o("option",{attrs:{value:"1SGT"}},[t._v("1SGT")]),t._v(" "),o("option",{attrs:{value:"2SGT"}},[t._v("2SGT")]),t._v(" "),o("option",{attrs:{value:"3SGT"}},[t._v("3SGT")]),t._v(" "),o("option",{attrs:{value:"CABO"}},[t._v("CABO")]),t._v(" "),o("option",{attrs:{value:"SD1C"}},[t._v("SD1C")]),t._v(" "),o("option",{attrs:{value:"SD2C"}},[t._v("SD2C")]),t._v(" "),o("option",{attrs:{value:"null"}},[t._v("Nâo encontrado")])])]),t._v(" "),o("v-label",{attrs:{lg:"2",md:"2",title:"Quadro",error:t.error.pessoa_quadro}},[o("select",{directives:[{name:"model",rawName:"v-model",value:t.registro.pessoa_quadro,expression:"registro.pessoa_quadro"}],staticClass:"form-control",on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.registro,"pessoa_quadro",e.target.multiple?o:o[0])}}},[o("option",{attrs:{value:"QPMG1"}},[t._v("QPMG1")]),t._v(" "),o("option",{attrs:{value:"QPMG2"}},[t._v("QPMG2")]),t._v(" "),o("option",{attrs:{value:"QOPM"}},[t._v("QOPM")]),t._v(" "),o("option",{attrs:{value:"QOBM"}},[t._v("QOBM")]),t._v(" "),o("option",{attrs:{value:"QEOPM"}},[t._v("QEOPM")]),t._v(" "),o("option",{attrs:{value:"QOS"}},[t._v("QOS")]),t._v(" "),o("option",{attrs:{value:"PM"}},[t._v("PM")]),t._v(" "),o("option",{attrs:{value:"BM"}},[t._v("BM")]),t._v(" "),o("option",{attrs:{value:"null"}},[t._v("Nâo encontrado")])])]),t._v(" "),o("v-label",{attrs:{lg:"2",md:"2",title:"OPM",error:t.error.pessoa_opm_codigo}},[o("v-opm",{attrs:{cdopm:t.registro.pessoa_opm_codigo},model:{value:t.registro.pessoa_opm_codigo,callback:function(e){t.$set(t.registro,"pessoa_opm_codigo",e)},expression:"registro.pessoa_opm_codigo"}})],1),t._v(" "),o("div",{staticClass:"col-xs-12"},[o("div",{staticClass:"col-md-8 col-xs-12"},[o("v-tooltip",{attrs:{effect:"scale",placement:"top",content:t.msgRequired}},[t.registro.id_apresentacao?o("a",{staticClass:"btn btn-success btn-block",attrs:{disabled:t.requireds},on:{click:function(e){return e.preventDefault(),t.update(t.registro.id_apresentacao)}}},[t._v("Editar")]):o("a",{staticClass:"btn btn-success btn-block",attrs:{disabled:t.requireds},on:{click:t.create}},[t._v("Inserir")])])],1),t._v(" "),o("div",{staticClass:"col-md-4 col-xs-12"},[o("a",{staticClass:"btn btn-danger btn-block",on:{click:t.limparDados}},[t._v("Limpar todos dados")])])]),t._v(" "),o("div",{staticClass:"col-xs-12"},[o("table",{staticClass:"table table-striped"},[t.lenght?[t._m(0),t._v(" "),o("tbody",t._l(t.registros,function(e,a){return o("tr",{key:a},[o("td",[t._v(t._s(e.autos_numero))]),t._v(" "),o("td",[t._v(t._s(e.autos_ano))]),t._v(" "),o("td",[t._v(t._s(e.acusados))]),t._v(" "),o("td",[t._v(t._s(e.comparecimento_data))]),t._v(" "),o("td",[t._v(t._s(e.comparecimento_hora))]),t._v(" "),o("td",[t._v(t._s(e.comparecimento_local_txt))]),t._v(" "),o("td",[t._v(t._s(e.pessoa_rg))]),t._v(" "),o("td",[t._v(t._s(e.pessoa_nome))]),t._v(" "),o("td",[t._v(t._s(e.pessoa_quadro))]),t._v(" "),o("td",[t._v(t._s(e.pessoa_unidade_lotacao_sigla))]),t._v(" "),o("td",[o("span",[t.canEdit?[o("a",{staticClass:"btn btn-info",on:{click:function(o){return t.edit(e)}}},[o("i",{staticClass:"fa fa-fw fa-edit "})])]:t._e(),t._v(" "),t.canDelete?[o("a",{staticClass:"btn btn-danger",on:{click:function(o){return t.destroy(e.id_apresentacao)}}},[o("i",{staticClass:"fa fa-fw fa-trash-o "})])]:t._e()],2)])])}),0)]:[t._m(1)]],2)])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("thead",[o("tr",[o("th",{staticClass:"col-xs-1"},[o("b",[t._v("N° Autos")])]),t._v(" "),o("th",{staticClass:"col-xs-1"},[o("b",[t._v("Autos ano")])]),t._v(" "),o("th",{staticClass:"col-xs-1"},[o("b",[t._v("Acusados")])]),t._v(" "),o("th",{staticClass:"col-xs-1"},[o("b",[t._v("Data comparecimento")])]),t._v(" "),o("th",{staticClass:"col-xs-1"},[o("b",[t._v("Hora")])]),t._v(" "),o("th",{staticClass:"col-xs-1"},[o("b",[t._v("Local")])]),t._v(" "),o("th",{staticClass:"col-xs-1"},[o("b",[t._v("RG")])]),t._v(" "),o("th",{staticClass:"col-xs-1"},[o("b",[t._v("Nome")])]),t._v(" "),o("th",{staticClass:"col-xs-1"},[o("b",[t._v("Posto/grad.")])]),t._v(" "),o("th",{staticClass:"col-xs-1"},[o("b",[t._v("OPM")])]),t._v(" "),o("th",{staticClass:"col-xs-2"},[o("b",[t._v("Ações")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",[this._v("Não há registros")])])}]}},aEKI:function(t,e,o){var a=o("1voi");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);o("rjj0")("36a89d0f",a,!0,{})},cvCn:function(t,e,o){var a=o("VU/8")(o("LBfB"),o("S0bl"),!1,function(t){o("aEKI")},"data-v-499e66e8",null);t.exports=a.exports}});