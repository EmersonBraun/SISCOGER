webpackJsonp([52],{"5KGz":function(t,e,a){var o=a("VU/8")(a("jFin"),a("bnkj"),!1,function(t){a("JOy5")},"data-v-aa0a006c",null);t.exports=o.exports},JOy5:function(t,e,a){var o=a("MK9m");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a("rjj0")("2ef05194",o,!0,{})},MK9m:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"td[data-v-aa0a006c]{white-space:normal!important;word-wrap:break-word}table[data-v-aa0a006c]{table-layout:fixed}",""])},bnkj:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-tab",{attrs:{header:"Trâmite OPM",badge:t.lenght}},[a("table",{staticClass:"table table-striped"},[t.lenght?[a("thead",[a("tr",[a("th",{staticClass:"col-xs-4"},[t._v("Data")]),t._v(" "),a("th",{staticClass:"col-xs-4"},[t._v("Descrição")]),t._v(" "),a("th",{staticClass:"col-xs-4"},[t._v("Digitador")]),t._v(" "),a("th",{staticClass:"col-xs-4"},[t._v("Ações")])])]),t._v(" "),a("tbody",t._l(t.registros,function(e){return a("tr",{key:e.id_tramitacaoopm},[a("td",[t._v(t._s(t._f("date_br")(e.data)))]),t._v(" "),a("td",[t._v(t._s(e.descricao_txt))]),t._v(" "),a("td",[t._v(t._s(e.digitador))]),t._v(" "),a("td",[a("span",[t.canEdit?[a("a",{staticClass:"btn btn-info",on:{click:function(a){return t.edit(e)}}},[a("i",{staticClass:"fa fa-fw fa-edit "})])]:t._e(),t._v(" "),t.canDelete?[a("a",{staticClass:"btn btn-danger",on:{click:function(a){return t.destroy(e.id_tramitacaoopm)}}},[a("i",{staticClass:"fa fa-fw fa-trash-o "})])]:t._e()],2)])])}),0)]:[a("tr",[a("td",[t._v("Nada encontrado")])])]],2),t._v(" "),t.canCreate?[a("a",{staticClass:"btn btn-primary btn-block",on:{click:t.toCreate}},[a("i",{staticClass:"fa fa-plus"}),t._v("Adicionar Trâmite\n        ")])]:t._e(),t._v(" "),a("v-modal",{attrs:{large:"",effect:"fade",width:"70%"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[a("h4",{staticClass:"modal-title"},[t.registro.id_tramitacaoopm?a("b",[t._v("Editar Trâmite")]):a("b",[t._v("Inserir novo Trâmite")])])]),t._v(" "),a("div",{attrs:{slot:"modal-body"},slot:"modal-body"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.registro.id_tramitacaoopm,expression:"registro.id_tramitacaoopm"}],attrs:{type:"hidden",name:"id"},domProps:{value:t.registro.id_tramitacaoopm},on:{input:function(e){e.target.composing||t.$set(t.registro,"id_tramitacaoopm",e.target.value)}}}),t._v(" "),a("v-label",{attrs:{label:"rg",title:"RG"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.registro.rg,expression:"registro.rg"}],staticClass:"form-control",attrs:{type:"text",size:"12",maxlength:"25",readonly:""},domProps:{value:t.registro.rg},on:{input:function(e){e.target.composing||t.$set(t.registro,"rg",e.target.value)}}})]),t._v(" "),a("v-label",{attrs:{label:"cargo",title:"Posto/Grad."}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.registro.cargo,expression:"registro.cargo"}],staticClass:"form-control",attrs:{type:"text",size:"6",maxlength:"10",readonly:""},domProps:{value:t.registro.cargo},on:{input:function(e){e.target.composing||t.$set(t.registro,"cargo",e.target.value)}}})]),t._v(" "),a("v-label",{attrs:{label:"nome",title:"Nome"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.registro.nome,expression:"registro.nome"}],staticClass:"form-control",attrs:{type:"text",size:"40",readonly:""},domProps:{value:t.registro.nome},on:{input:function(e){e.target.composing||t.$set(t.registro,"nome",e.target.value)}}})]),t._v(" "),a("v-label",{attrs:{label:"data",title:"Início da restrição",icon:"fa fa-calendar"}},[a("v-datepicker",{attrs:{name:"data",placeholder:t.registro.data,"clear-button":""},model:{value:t.registro.data,callback:function(e){t.$set(t.registro,"data",e)},expression:"registro.data"}})],1),t._v(" "),a("v-label",{attrs:{label:"nome",title:"Digitador"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.registro.digitador,expression:"registro.digitador"}],staticClass:"form-control",attrs:{type:"text",size:"40",readonly:""},domProps:{value:t.registro.digitador},on:{input:function(e){e.target.composing||t.$set(t.registro,"digitador",e.target.value)}}})]),t._v(" "),a("v-label",{attrs:{label:"descricao_txt",title:"Descrição",lg:"12",md:"12"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.registro.descricao_txt,expression:"registro.descricao_txt"}],attrs:{id:"foco",rows:"6",cols:"105",width:"100%"},domProps:{value:t.registro.descricao_txt},on:{input:function(e){e.target.composing||t.$set(t.registro,"descricao_txt",e.target.value)}}})])],1),t._v(" "),a("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("div",{staticClass:"col-xs-6"},[a("a",{staticClass:"btn btn-default btn-block",on:{click:function(e){t.showModal=!1}}},[t._v("Cancelar")])]),t._v(" "),a("div",{staticClass:"col-xs-6"},[a("v-tooltip",{attrs:{effect:"scale",placement:"top",content:t.msgRequired}},[t.registro.id_tramitacaoopm?a("a",{staticClass:"btn btn-success btn-block",attrs:{disabled:t.requireds},on:{click:function(e){return e.preventDefault(),t.update(t.registro.id_tramitacaoopm)}}},[t._v("Editar")]):a("a",{staticClass:"btn btn-success btn-block",attrs:{disabled:t.requireds},on:{click:t.create}},[t._v("Inserir")])])],1)])])],2)},staticRenderFns:[]}},jFin:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["pm"],data:function(){return{module:"tramiteopm",registros:[],registro:{},canCreate:!1,canEdit:!1,canDelete:!1,showModal:!1}},mounted:function(){this.list(),this.canCreate=this.$root.hasPermission("criar-tramite-opm"),this.canEdit=this.$root.hasPermission("editar-tramite-opm"),this.canDelete=this.$root.hasPermission("apagar-tramite-opm")},computed:{requireds:function(){return!this.registro.data||!this.registro.descricao_txt},lenght:function(){return this.registros?Object.keys(this.registros).length:0},msgRequired:function(){return"Para liberar este botão os campos: DATA e DESCRIÇÃO deve estar preenchidos"}},methods:{list:function(){var t=this,e=this.$root.baseUrl+"api/"+this.module+"/list/"+this.pm.RG;this.pm.RG&&axios.get(e).then(function(e){t.registros=e.data}).catch(function(t){return console.log(t)})},toCreate:function(){this.showModal=!0,this.registro.rg=this.pm.RG,this.registro.cargo=this.pm.CARGO,this.registro.nome=this.pm.NOME,this.registro.rg_cadastro=this.$root.dadoSession("rg"),this.registro.cdopm=this.$root.dadoSession("cdopm"),this.registro.opm_abreviatura=this.$root.dadoSession("opm_abreviatura"),this.registro.digitador=this.$root.dadoSession("nome")},create:function(){var t=this;if(!this.requireds){var e=this.$root.baseUrl+"api/"+this.module+"/store";axios.post(e,this.registro).then(function(e){t.transation(e.data.success,"create")}).catch(function(t){return console.log(t)}),this.showModal=!1}},edit:function(t){this.registro=t,this.toCreate()},update:function(t){var e=this;if(!this.requireds){var a=this.$root.baseUrl+"api/"+this.module+"/update/"+t;axios.put(a,this.registro).then(function(t){e.transation(t.data.success,"edit")}).catch(function(t){return console.log(t)})}},destroy:function(t){var e=this;if(confirm("Você tem certeza?")){var a=this.$root.baseUrl+"api/"+this.module+"/destroy/"+t;axios.delete(a).then(function(t){e.transation(t.data.success,"delete")}).catch(function(t){return console.log(t)})}},transation:function(t,e){var a=this.words(e);this.showModal=!1,t?(this.list(),this.$root.msg(a.success,"success"),this.registro=null,this.registro={}):this.$root.msg(a.fail,"danger")},words:function(t){return"create"==t?{success:"Inserido com sucesso",fail:"Erro ao inserir"}:"edit"==t?{success:"Editado com sucesso",fail:"Erro ao editar"}:"delete"==t?{success:"Apagado com sucesso",fail:"Erro ao apagar"}:void 0}}}}});