webpackJsonp([70],{GdtW:function(t,s,o){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default={props:["id_cadastroopmcoger"],data:function(){return{module:"cadastroopmautoridade",registros:[],registro:{},canCreate:!1,canEdit:!1,canDelete:!1,showModal:!1,nome:""}},created:function(){this.canCreate=this.$root.hasPermission("criar-dados-unidade"),this.canEdit=this.$root.hasPermission("editar-dados-unidade"),this.canDelete=this.$root.hasPermission("apagar-dados-unidade"),this.list()},computed:{requireds:function(){return!this.registro.rg||!this.registro.funcao},lenght:function(){return this.registros?Object.keys(this.registros).length:0},msgRequired:function(){return"Para liberar este botão os campos: RG e Função deve estar preenchidos"}},methods:{list:function(){var t=this,s=this.$root.baseUrl+"api/"+this.module+"/list/"+this.id_cadastroopmcoger;this.id_cadastroopmcoger&&axios.get(s).then(function(s){console.log(s.data),t.registros=s.data[0]}).catch(function(t){return console.log(t)})},toCreate:function(){this.showModal=!0,this.registro.id_cadastroopmcoger=this.id_cadastroopmcoger,this.registro.usuario_rg=this.rg},create:function(){var t=this;if(!this.requireds){var s=this.$root.baseUrl+"api/"+this.module+"/store";axios.post(s,this.registro).then(function(s){t.transation(s.data.success,"create")}).catch(function(t){return console.log(t)}),this.showModal=!1}},edit:function(t){this.registro=t,this.showModal=!0},update:function(t){var s=this;if(!this.requireds){var o=this.$root.baseUrl+"api/"+this.module+"/update/"+t;axios.put(o,this.registro).then(function(t){s.transation(t.data.success,"edit")}).catch(function(t){return console.log(t)})}},destroy:function(t){var s=this;if(confirm("Você tem certeza?")){var o=this.$root.baseUrl+"api/"+this.module+"/destroy/"+t;axios.delete(o).then(function(t){s.transation(t.data.success,"delete")}).catch(function(t){return console.log(t)})}},transation:function(t,s){var o=this.words(s);this.showModal=!1,t?(this.$root.msg(o.success,"success"),this.registro=null,this.registro={},this.list()):this.$root.msg(o.fail,"danger")},words:function(t){return"create"==t?{success:"Inserido com sucesso",fail:"Erro ao inserir"}:"edit"==t?{success:"Editado com sucesso",fail:"Erro ao editar"}:"delete"==t?{success:"Apagado com sucesso",fail:"Erro ao apagar"}:void 0},dadosPM:function(){var t=this;if(this.registro.rg.length>3){var s=this.$root.baseUrl+"api/dados/pm/"+this.registro.rg;axios.get(s).then(function(s){console.log("res",s);var o=s.data.pm;t.nome=o.cargo_ico+" "+o.quadro_ico+" "+o.nome_ico}).catch(function(t){return console.log(t)})}}}}},hToh:function(t,s,o){var e=o("hhZE");"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);o("rjj0")("2a873c44",e,!0,{})},hhZE:function(t,s,o){(t.exports=o("FZ+f")(!1)).push([t.i,"td[data-v-1211650e]{white-space:normal!important;word-wrap:break-word}table[data-v-1211650e]{table-layout:fixed}",""])},"j/g9":function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("div",{staticClass:"col-xs-12"},[o("div",{staticClass:"box"},[t._m(0),t._v(" "),o("div",{staticClass:"box-body"},[o("div",{staticClass:"col-md-12 col-xs-12"},[o("table",{staticClass:"table table-striped"},[t.lenght?[t._m(1),t._v(" "),o("tbody",t._l(t.registros,function(s){return o("tr",{key:s.id_cadastroopmcogerautoridade},[o("td",[t._v(t._s(s.rg))]),t._v(" "),o("td",[t._v(t._s(s.funcao))]),t._v(" "),o("td",[o("span",[t.canEdit?[o("a",{staticClass:"btn btn-info",on:{click:function(o){return t.edit(s)}}},[o("i",{staticClass:"fa fa-fw fa-edit "})])]:t._e(),t._v(" "),t.canDelete?[o("a",{staticClass:"btn btn-danger",on:{click:function(o){return t.destroy(s.id_cadastroopmcogerautoridade)}}},[o("i",{staticClass:"fa fa-fw fa-trash-o "})])]:t._e()],2)])])}),0)]:[t._m(2)]],2),t._v(" "),t.canCreate?[o("a",{staticClass:"btn btn-primary btn-block",on:{click:function(s){return t.toCreate("create")}}},[o("i",{staticClass:"fa fa-plus"}),t._v("Adicionar Autoridade\n                    ")])]:t._e(),t._v(" "),o("v-modal",{attrs:{large:"",effect:"fade",width:"80%"},model:{value:t.showModal,callback:function(s){t.showModal=s},expression:"showModal"}},[o("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[o("h4",{staticClass:"modal-title"},[t.registro.id_cadastroopmcogerautoridade?o("b",[t._v("Editar Autoridade")]):o("b",[t._v("Inserir nova Autoridade")])])]),t._v(" "),o("div",{attrs:{slot:"modal-body"},slot:"modal-body"},[o("v-label",{attrs:{label:"rg",title:"RG"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.registro.rg,expression:"registro.rg"}],staticClass:"form-control",attrs:{size:"45",type:"text"},domProps:{value:t.registro.rg},on:{keyup:t.dadosPM,input:function(s){s.target.composing||t.$set(t.registro,"rg",s.target.value)}}})]),t._v(" "),o("v-label",{attrs:{label:"nome",title:"Nome"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.nome,expression:"nome"}],staticClass:"form-control",attrs:{type:"text",readonly:""},domProps:{value:t.nome},on:{input:function(s){s.target.composing||(t.nome=s.target.value)}}})]),t._v(" "),o("v-label",{attrs:{label:"funcao",title:"Função"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.registro.funcao,expression:"registro.funcao"}],staticClass:"form-control",attrs:{size:"45",type:"text"},domProps:{value:t.registro.funcao},on:{input:function(s){s.target.composing||t.$set(t.registro,"funcao",s.target.value)}}})])],1),t._v(" "),o("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[o("div",{staticClass:"col-xs-6"},[o("a",{staticClass:"btn btn-default btn-block",on:{click:function(s){t.showModal=!1}}},[t._v("Cancelar")])]),t._v(" "),o("div",{staticClass:"col-xs-6"},[t.canCreate?[o("v-tooltip",{attrs:{effect:"scale",placement:"top",content:t.msgRequired}},[t.registro.id_cadastroopmcogerautoridade?o("a",{staticClass:"btn btn-success btn-block",attrs:{disabled:t.requireds},on:{click:function(s){return s.preventDefault(),t.update(t.registro.id_cadastroopmcogerautoridade)}}},[t._v("Editar")]):o("a",{staticClass:"btn btn-success btn-block",attrs:{disabled:t.requireds},on:{click:t.create}},[t._v("Inserir")])])]:t._e()],2)])])],2)])])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"box-header"},[s("h2",{staticClass:"box-title"},[this._v("Outras Autoridades")]),this._v(" "),s("div",{staticClass:"box-tools pull-right"},[s("button",{staticClass:"btn btn-box-tool",attrs:{type:"button","data-widget":"collapse"}},[s("i",{staticClass:"fa fa-plus"})])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("thead",[s("tr",[s("th",{staticClass:"col-xs-4"},[this._v("RG")]),this._v(" "),s("th",{staticClass:"col-xs-4"},[this._v("Função")]),this._v(" "),s("th",{staticClass:"col-xs-4"},[this._v("Ações")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("tr",[s("td",[this._v("Nada encontrado")])])}]}},nrfN:function(t,s,o){var e=o("VU/8")(o("GdtW"),o("j/g9"),!1,function(t){o("hToh")},"data-v-1211650e",null);t.exports=e.exports}});