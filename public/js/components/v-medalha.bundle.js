webpackJsonp([63],{"8SwC":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-tab",{attrs:{header:"Medalhas",badge:t.lenght}},[a("table",{staticClass:"table table-striped"},[t.lenght?[a("thead",[a("tr",[a("th",{staticClass:"col-xs-2"},[a("b",[t._v("Medalha")])]),t._v(" "),a("th",{staticClass:"col-xs-2"},[a("b",[t._v("N° BI")])]),t._v(" "),a("th",{staticClass:"col-xs-2"},[a("b",[t._v("Data BI")])]),t._v(" "),a("th",{staticClass:"col-xs-4"},[a("b",[t._v("Descrição")])]),t._v(" "),a("th",{staticClass:"col-xs-2"},[a("b",[t._v("Ações")])])])]),t._v(" "),a("tbody",t._l(t.registros,function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(e.nome_medalha))]),t._v(" "),a("td",[t._v(t._s(e.bi_num))]),t._v(" "),a("td",[t._v(t._s(e.bi_data))]),t._v(" "),a("td",[t._v(t._s(e.obs_txt))]),t._v(" "),a("td",[a("span",[t.canEdit?[a("a",{staticClass:"btn btn-info",on:{click:function(a){return t.edit(e)}}},[a("i",{staticClass:"fa fa-fw fa-edit "})])]:t._e(),t._v(" "),t.canDelete?[a("a",{staticClass:"btn btn-danger",on:{click:function(a){return t.destroy(e.id_medalha)}}},[a("i",{staticClass:"fa fa-fw fa-trash-o "})])]:t._e()],2)])])}),0)]:[a("tr",[a("td",[t._v("Nada encontrado")])])]],2),t._v(" "),t.canCreate?[a("a",{staticClass:"btn btn-primary btn-block",on:{click:t.toCreate}},[a("i",{staticClass:"fa fa-plus"}),t._v("Adicionar Medalha\n        ")])]:t._e(),t._v(" "),a("v-modal",{attrs:{large:"",effect:"fade",width:"65%"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.registro.id_medalha,expression:"registro.id_medalha"}],attrs:{type:"hidden",name:"id"},domProps:{value:t.registro.id_medalha},on:{input:function(e){e.target.composing||t.$set(t.registro,"id_medalha",e.target.value)}}}),t._v(" "),a("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[a("h4",{staticClass:"modal-title"},[t.registro.id_medalha?a("b",[t._v("Editar Medalha")]):a("b",[t._v("Inserir nova Medalha")])])]),t._v(" "),a("div",{attrs:{slot:"modal-body"},slot:"modal-body"},[a("v-label",{attrs:{lg:"4",label:"rg",title:"RG"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.registro.rg,expression:"registro.rg"}],staticClass:"form-control",attrs:{type:"text",size:"12",maxlength:"25",readonly:""},domProps:{value:t.registro.rg},on:{input:function(e){e.target.composing||t.$set(t.registro,"rg",e.target.value)}}})]),t._v(" "),a("v-label",{attrs:{lg:"4",label:"cargo",title:"Posto/Grad."}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.registro.cargo,expression:"registro.cargo"}],staticClass:"form-control",attrs:{type:"text",size:"6",maxlength:"10",readonly:""},domProps:{value:t.registro.cargo},on:{input:function(e){e.target.composing||t.$set(t.registro,"cargo",e.target.value)}}})]),t._v(" "),a("v-label",{attrs:{lg:"4",label:"nome",title:"Nome"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.registro.nome,expression:"registro.nome"}],staticClass:"form-control",attrs:{type:"text",size:"40",readonly:""},domProps:{value:t.registro.nome},on:{input:function(e){e.target.composing||t.$set(t.registro,"nome",e.target.value)}}})]),t._v(" "),a("v-label",{attrs:{lg:"4",label:"nome_medalha",title:"Nome da medalha"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.registro.nome_medalha,expression:"registro.nome_medalha"}],staticClass:"form-control",attrs:{type:"text",size:"40",maxlength:"120"},domProps:{value:t.registro.nome_medalha},on:{input:function(e){e.target.composing||t.$set(t.registro,"nome_medalha",e.target.value)}}})]),t._v(" "),a("v-label",{attrs:{lg:"4",label:"publicacao",title:"N° BI",tooltip:"Ex: BI nº 010/2011"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.registro.bi_num,expression:"registro.bi_num"}],staticClass:"form-control",attrs:{type:"text",size:"40",maxlength:"120"},domProps:{value:t.registro.bi_num},on:{input:function(e){e.target.composing||t.$set(t.registro,"bi_num",e.target.value)}}})]),t._v(" "),a("v-label",{attrs:{lg:"4",label:"data",title:"Data BI"}},[a("v-datepicker",{attrs:{placeholder:t.registro.bi_data,"clear-button":""},model:{value:t.registro.bi_data,callback:function(e){t.$set(t.registro,"bi_data",e)},expression:"registro.bi_data"}})],1),t._v(" "),a("v-label",{attrs:{label:"obs_txt",title:"Observações",lg:"12",md:"12"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.registro.obs_txt,expression:"registro.obs_txt"}],attrs:{id:"foco",rows:"5",cols:"105",width:"100%"},domProps:{value:t.registro.obs_txt},on:{input:function(e){e.target.composing||t.$set(t.registro,"obs_txt",e.target.value)}}})])],1),t._v(" "),a("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("div",{staticClass:"col-xs-6"},[a("a",{staticClass:"btn btn-default btn-block",on:{click:function(e){t.showModal=!1}}},[t._v("Cancelar")])]),t._v(" "),a("div",{staticClass:"col-xs-6"},[a("v-tooltip",{attrs:{effect:"scale",placement:"top",content:t.msgRequired}},[t.registro.id_medalha?a("a",{staticClass:"btn btn-success btn-block",attrs:{disabled:t.requireds},on:{click:function(e){return e.preventDefault(),t.update(t.registro.id_medalha)}}},[t._v("Editar")]):a("a",{staticClass:"btn btn-success btn-block",attrs:{disabled:t.requireds},on:{click:t.create}},[t._v("Inserir")])])],1)])])],2)},staticRenderFns:[]}},OJqp:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"td[data-v-12ee55a9]{white-space:normal!important;word-wrap:break-word}table[data-v-12ee55a9]{table-layout:fixed}",""])},VgKm:function(t,e,a){var s=a("VU/8")(a("wNBR"),a("8SwC"),!1,function(t){a("qkRj")},"data-v-12ee55a9",null);t.exports=s.exports},qkRj:function(t,e,a){var s=a("OJqp");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("rjj0")("30527839",s,!0,{})},wNBR:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["pm"],data:function(){return{module:"medalha",registros:[],registro:{},punicoes:[],canCreate:!1,canEdit:!1,canDelete:!1,showModal:!1}},created:function(){this.list(),this.canCreate=this.$root.hasPermission("criar-medalhas"),this.canEdit=this.$root.hasPermission("editar-medalhas"),this.canDelete=this.$root.hasPermission("apagar-medalhas")},computed:{requireds:function(){return!this.registro.nome_medalha||!this.registro.obs_txt},lenght:function(){return this.registros?Object.keys(this.registros).length:0},msgRequired:function(){return"Para liberar este botão os campos: NOME DA MEDALHA e DESCRIÇÃO deve estar preenchidos"}},methods:{list:function(){var t=this,e=this.$root.baseUrl+"api/"+this.module+"/list/"+this.pm.RG;this.pm.RG&&axios.get(e).then(function(e){t.registros=e.data,t.$emit("length",t.length)}).catch(function(t){return console.log(t)})},toCreate:function(){this.showModal=!0,this.registro.rg_cadastro=this.$root.dadoSession("rg"),this.registro.rg=this.pm.RG,this.registro.cargo=this.pm.CARGO,this.registro.nome=this.pm.NOME},create:function(){var t=this;if(!this.requireds){var e=this.$root.baseUrl+"api/"+this.module+"/store";axios.post(e,this.registro).then(function(e){t.transation(e.data.success,"create")}).catch(function(t){return console.log(t)}),this.showModal=!1}},edit:function(t){this.registro=t,this.toCreate()},update:function(t){var e=this;if(!this.requireds){var a=this.$root.baseUrl+"api/"+this.module+"/update/"+t;axios.put(a,this.registro).then(function(t){e.transation(t.data.success,"edit")}).catch(function(t){return console.log(t)})}},destroy:function(t){var e=this;if(confirm("Você tem certeza?")){var a=this.$root.baseUrl+"api/"+this.module+"/destroy/"+t;axios.delete(a).then(function(t){e.transation(t.data.success,"delete")}).catch(function(t){return console.log(t)})}},transation:function(t,e){var a=this.words(e);this.showModal=!1,t?(this.list(),this.$root.msg(a.success,"success"),this.registro={}):this.$root.msg(a.fail,"danger")},words:function(t){return"create"==t?{success:"Inserido com sucesso",fail:"Erro ao inserir"}:"edit"==t?{success:"Editado com sucesso",fail:"Erro ao editar"}:"delete"==t?{success:"Apagado com sucesso",fail:"Erro ao apagar"}:void 0}}}}});