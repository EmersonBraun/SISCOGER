webpackJsonp([56],{"853+":function(t,o){t.exports={render:function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("v-tab",{attrs:{header:"E-Protocolo",badge:t.lenght}},[s("table",{staticClass:"table table-striped"},[t.lenght?[s("thead",[s("tr",[s("th",{staticClass:"col-xs-1"},[t._v("N° Documento")]),t._v(" "),s("th",{staticClass:"col-xs-4"},[t._v("Descrição")]),t._v(" "),s("th",{staticClass:"col-xs-1"},[t._v("RG Autor")]),t._v(" "),s("th",{staticClass:"col-xs-1"},[t._v("RG Analista")]),t._v(" "),s("th",{staticClass:"col-xs-3"},[t._v("Observações")]),t._v(" "),s("th",{staticClass:"col-xs-2"},[t._v("Ações")])])]),t._v(" "),s("tbody",t._l(t.registros,function(o){return s("tr",{key:o.id_protocolo},[s("td",[t._v(t._s(o.numero))]),t._v(" "),s("td",[t._v(t._s(o.descricao_txt))]),t._v(" "),s("td",[t._v(t._s(o.rg_autor))]),t._v(" "),s("td",[t._v(t._s(o.rg_analista))]),t._v(" "),s("td",[t._v(t._s(o.obs))]),t._v(" "),s("td",[s("span",[t.canEdit?[s("a",{staticClass:"btn btn-info",on:{click:function(s){return t.edit(o)}}},[s("i",{staticClass:"fa fa-fw fa-edit "})])]:t._e(),t._v(" "),t.canDelete?[s("a",{staticClass:"btn btn-danger",on:{click:function(s){return t.destroy(o.id_protocolo)}}},[s("i",{staticClass:"fa fa-fw fa-trash-o "})])]:t._e()],2)])])}),0)]:[s("tr",[s("td",[t._v("Nada encontrado")])])]],2),t._v(" "),t.canCreate?[s("a",{staticClass:"btn btn-primary btn-block",on:{click:t.toCreate}},[s("i",{staticClass:"fa fa-plus"}),t._v("Adicionar Protocolo\n        ")])]:t._e(),t._v(" "),s("v-modal",{attrs:{large:"",effect:"fade"},model:{value:t.showModal,callback:function(o){t.showModal=o},expression:"showModal"}},[s("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[s("h4",{staticClass:"modal-title"},[t.registro.id_protocolo?s("b",[t._v("Editar Protocolo")]):s("b",[t._v("Inserir novo Protocolo")])])]),t._v(" "),s("div",{attrs:{slot:"modal-body"},slot:"modal-body"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.registro.id_protocolo,expression:"registro.id_protocolo"}],attrs:{type:"hidden",name:"id"},domProps:{value:t.registro.id_protocolo},on:{input:function(o){o.target.composing||t.$set(t.registro,"id_protocolo",o.target.value)}}}),t._v(" "),s("v-label",{attrs:{lg:"6",label:"numero",title:"Numero do protocolo"}},[s("the-mask",{staticClass:"form-control",attrs:{mask:"##.###.###-#",type:"text",required:"",placeholder:"00.000.000-0"},model:{value:t.registro.numero,callback:function(o){t.$set(t.registro,"numero",o)},expression:"registro.numero"}})],1),t._v(" "),s("v-label",{attrs:{lg:"6",label:"rg",title:"RG cadastro"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.registro.rg_autor,expression:"registro.rg_autor"}],staticClass:"form-control",attrs:{type:"text",readonly:""},domProps:{value:t.registro.rg_autor},on:{input:function(o){o.target.composing||t.$set(t.registro,"rg_autor",o.target.value)}}})]),t._v(" "),s("v-label",{attrs:{lg:"6",label:"rg_analista",title:"RG analista"}},[s("the-mask",{staticClass:"form-control",attrs:{mask:"###############",type:"text",placeholder:"Só números"},model:{value:t.registro.rg_analista,callback:function(o){t.$set(t.registro,"rg_analista",o)},expression:"registro.rg_analista"}})],1),t._v(" "),s("v-label",{attrs:{lg:"6",label:"obs",title:"Observações"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.registro.obs,expression:"registro.obs"}],staticClass:"form-control",attrs:{type:"text",maxlength:"50"},domProps:{value:t.registro.obs},on:{input:function(o){o.target.composing||t.$set(t.registro,"obs",o.target.value)}}})]),t._v(" "),s("v-label",{attrs:{lg:"12",label:"descricao_txt",title:"Descrição"}},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.registro.descricao_txt,expression:"registro.descricao_txt"}],attrs:{id:"foco",rows:"5",cols:"105",width:"100%"},domProps:{value:t.registro.descricao_txt},on:{input:function(o){o.target.composing||t.$set(t.registro,"descricao_txt",o.target.value)}}})])],1),t._v(" "),s("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("div",{staticClass:"col-xs-6"},[s("a",{staticClass:"btn btn-default btn-block",on:{click:function(o){t.showModal=!1}}},[t._v("Cancelar")])]),t._v(" "),s("div",{staticClass:"col-xs-6"},[s("v-tooltip",{attrs:{effect:"scale",placement:"top",content:t.msgRequired}},[t.registro.id_protocolo?s("a",{staticClass:"btn btn-success btn-block",attrs:{disabled:t.requireds},on:{click:function(o){return t.update(t.registro.id_protocolo)}}},[t._v("Editar")]):s("a",{staticClass:"btn btn-success btn-block",attrs:{disabled:t.requireds},on:{click:t.create}},[t._v("Inserir")])])],1)])])],2)},staticRenderFns:[]}},FmIo:function(t,o,s){(t.exports=s("FZ+f")(!1)).push([t.i,"td[data-v-7b9e6425]{white-space:normal!important;word-wrap:break-word}table[data-v-7b9e6425]{table-layout:fixed}",""])},MqfZ:function(t,o,s){var e=s("FmIo");"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);s("rjj0")("712118d8",e,!0,{})},cwrr:function(t,o,s){var e=s("VU/8")(s("pYTb"),s("853+"),!1,function(t){s("MqfZ")},"data-v-7b9e6425",null);t.exports=e.exports},pYTb:function(t,o,s){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var e=s("hlPV");s.n(e);o.default={components:{TheMask:e.TheMask},props:["rg"],data:function(){return{module:"protocolo",registros:[],registro:{},canCreate:!1,canEdit:!1,canDelete:!1,showModal:!1}},mounted:function(){this.list(),this.canCreate=this.$root.hasPermission("criar-protocolo"),this.canEdit=this.$root.hasPermission("editar-protocolo"),this.canDelete=this.$root.hasPermission("apagar-protocolo")},computed:{requireds:function(){return!this.registro.numero||!this.registro.descricao_txt},lenght:function(){return this.registros?Object.keys(this.registros).length:0},msgRequired:function(){return"Para liberar este botão os campos: NÚMERO E DESCRIÇÃO deve estar preenchidos"}},methods:{list:function(){var t=this,o=this.$root.baseUrl+"api/"+this.module+"/list/"+this.rg;this.rg&&axios.get(o).then(function(o){t.registros=o.data}).catch(function(t){return console.log(t)})},toCreate:function(){this.showModal=!0,this.registro.rg_autor=this.$root.dadoSession("rg"),this.registro.rg=this.rg},create:function(){var t=this;if(!this.requireds){var o=this.$root.baseUrl+"api/"+this.module+"/store";axios.post(o,this.registro).then(function(o){t.transation(o.data.success,"create")}).catch(function(t){return console.log(t)}),this.showModal=!1}},edit:function(t){this.registro=t,this.showModal=!0},update:function(t){var o=this;if(!this.requireds){var s=this.$root.baseUrl+"api/"+this.module+"/update/"+t;axios.put(s,this.registro).then(function(t){o.transation(t.data.success,"edit")}).catch(function(t){return console.log(t)})}},destroy:function(t){var o=this;if(confirm("Você tem certeza?")){var s=this.$root.baseUrl+"api/"+this.module+"/destroy/"+t;axios.delete(s).then(function(t){o.transation(t.data.success,"delete")}).catch(function(t){return console.log(t)})}},transation:function(t,o){var s=this.words(o);this.showModal=!1,t?(this.list(),this.$root.msg(s.success,"success"),this.registro={}):this.$root.msg(s.fail,"danger")},words:function(t){return"create"==t?{success:"Inserido com sucesso",fail:"Erro ao inserir"}:"edit"==t?{success:"Editado com sucesso",fail:"Erro ao editar"}:"delete"==t?{success:"Apagado com sucesso",fail:"Erro ao apagar"}:void 0}}}}});